<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>US Google Trends by State</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
    max-width: 900px;
    margin: auto;
  }
  h1 {
    text-align: center;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
  }
  th, td {
    border: 1px solid #aaa;
    padding: 8px 12px;
    text-align: left;
  }
  th {
    background-color: #f4f4f4;
  }
  td a {
    color: #0066cc;
    text-decoration: none;
  }
  td a:hover {
    text-decoration: underline;
  }
</style>
</head>
<body>

<h1>Top Google Trend by State</h1>
<p>Data updates every ~10 minutes via GitHub Actions.</p>

<table id="trendTable">
  <thead>
    <tr>
      <th>State</th>
      <th>Top Trend</th>
    </tr>
  </thead>
  <tbody>
    <tr><td colspan="2">Loading...</td></tr>
  </tbody>
</table>

<script>
const stateNames = {
  "US-AL":"Alabama","US-AK":"Alaska","US-AZ":"Arizona","US-AR":"Arkansas",
  "US-CA":"California","US-CO":"Colorado","US-CT":"Connecticut","US-DE":"Delaware",
  "US-FL":"Florida","US-GA":"Georgia","US-HI":"Hawaii","US-ID":"Idaho",
  "US-IL":"Illinois","US-IN":"Indiana","US-IA":"Iowa","US-KS":"Kansas",
  "US-KY":"Kentucky","US-LA":"Louisiana","US-ME":"Maine","US-MD":"Maryland",
  "US-MA":"Massachusetts","US-MI":"Michigan","US-MN":"Minnesota","US-MS":"Mississippi",
  "US-MO":"Missouri","US-MT":"Montana","US-NE":"Nebraska","US-NV":"Nevada",
  "US-NH":"New Hampshire","US-NJ":"New Jersey","US-NM":"New Mexico","US-NY":"New York",
  "US-NC":"North Carolina","US-ND":"North Dakota","US-OH":"Ohio","US-OK":"Oklahoma",
  "US-OR":"Oregon","US-PA":"Pennsylvania","US-RI":"Rhode Island","US-SC":"South Carolina",
  "US-SD":"South Dakota","US-TN":"Tennessee","US-TX":"Texas","US-UT":"Utah",
  "US-VT":"Vermont","US-VA":"Virginia","US-WA":"Washington","US-WV":"West Virginia",
  "US-WI":"Wisconsin","US-WY":"Wyoming"
};

async function loadTrends() {
  const tableBody = document.querySelector("#trendTable tbody");
  tableBody.innerHTML = "<tr><td colspan='2'>Loading...</td></tr>";

  try {
    const res = await fetch("trends.json");
    const data = await res.json();

    let rows = "";
    for (const stateCode in stateNames) {
      const state = stateNames[stateCode];
      const trend = data[stateCode] || {title: "N/A", link: "#"};
      const title = trend.title || "No trend";
      const link = trend.link || "#";
      rows += `<tr><td>${state}</td><td>${link!="#" ? `<a href="${link}" target="_blank">${title}</a>` : title}</td></tr>`;
    }

    tableBody.innerHTML = rows;

  } catch (err) {
    tableBody.innerHTML = "<tr><td colspan='2'>Failed to load trends ðŸ˜¢</td></tr>";
    console.error(err);
  }
}

// initial load
loadTrends();

// optional: refresh every 10 minutes (600000 ms)
setInterval(loadTrends, 600000);
</script>

</body>
</html>
